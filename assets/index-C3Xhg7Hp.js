(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();class E{constructor(e,t){this.title=e,this.fields=t}open(){let e;return new Promise((t,i)=>{const n=document.createElement("div");n.classList.add("add-component-dialog");const s=document.createElement("div");s.classList.add("modal-content");const r=document.createElement("h2");r.textContent=this.title,s.appendChild(r);const o=document.createElement("form");o.className="add-component-form",o.addEventListener("submit",c=>{c.preventDefault();const m={};let f=!0;if(this.fields.forEach(l=>{const C=o.querySelector(`#${l.key}`);m[l.key]=C.value,!C.value&&C.required&&(f=!1)}),!f){alert("All fields required");return}e(),t(m)}),this.fields.forEach(c=>{const m=document.createElement("div");m.classList.add("form-field-group");const f=document.createElement("label");f.htmlFor=c.key,f.textContent=c.label+":";const l=document.createElement("input");l.type=c.type==="number"?"number":"text",l.id=c.key,l.name=c.key,l.value=c.defaultValue!==void 0?String(c.defaultValue):"",l.required=!0,m.appendChild(f),m.appendChild(l),o.appendChild(m)});const d=document.createElement("div");d.classList.add("modal-buttons-container");const h=document.createElement("button");h.type="submit",h.id="submit-component",h.textContent="Save";const u=document.createElement("button");u.type="button",u.id="cancel-component",u.textContent="Cancel",u.addEventListener("click",c=>{e(),t(null)}),d.appendChild(h),d.appendChild(u),o.appendChild(d),s.appendChild(o),n.appendChild(s),document.body.appendChild(n),e=()=>{document.body.contains(n)&&document.body.removeChild(n)}})}}var p=(a=>(a.Monitor="Monitor",a.HDDDrive="HDD Drive",a.SSDDrive="SSD Drive",a.Mouse="Mouse",a.Keyboard="Keyboard",a))(p||{});class k{constructor(e,t,i){this.id=0,this.active=!1,this.actions=[],this.name=e,this.type=t,this.computer=i,this.actions=[{name:"Set Active",action:()=>{this.activate(!0),g(i)}}]}getInfo(){throw new Error("Each component class have to override this method")}addComponent(){throw new Error("Each component class have to override this method")}getId(){return this.id}setId(e){this.id=e}getName(){return this.name}getType(){return this.type}isActive(){return this.active}activate(e){return this.computer.getComponents().forEach(t=>{t.getType()===this.type&&t.isActive()&&t.deactivate()}),this.active=e,this}deactivate(){this.active=!1}getActions(){return this.actions}}class I extends k{constructor(e,t,i,n){super(e,t,i),this.capacity=0,this.storage=0,this.files=[],this.capacity=n}addFile(e){this.files.push(e)}removeFile(e){this.files.splice(this.files.indexOf(e),1)}getFiles(){return this.files}runFile(e){this.files.forEach(t=>{t===e&&t.run()})}}class M extends I{constructor(e,t,i){super(e,p.HDDDrive,t,i)}getCapacity(){return this.capacity}getStorage(){return this.storage}getInfo(){return"Name: "+this.getName()+`
Type: `+this.getType()+`
Capacity: `+this.getCapacity()+`
Actual Storage: `+this.getStorage()}static async addComponent(e){const t=[{key:"name",label:"Component name",type:"string",defaultValue:"New disk"},{key:"capacity",label:"Capacity (GB)",type:"number",defaultValue:500}],n=await new E("Add HDD Disk",t).open();if(!n)return null;const s=parseInt(n.capacity,10);return isNaN(s)||s<=0?(alert("Value have to be positive."),null):new M(n.name,e,s)}}class H{constructor(){this.supportedComponentsType=Object.values(p)}open(){let e;return new Promise(t=>{const i=document.createElement("div");i.classList.add("component-select-dialog");const n=document.createElement("div");n.classList.add("select-modal-content");const s=document.createElement("h2");s.textContent="Select Component Type",n.appendChild(s);const r=document.createElement("select");r.classList.add("component-selector"),this.supportedComponentsType.forEach(h=>{const u=document.createElement("option");u.value=h,u.text=h.toString().replace(/_/g," "),r.appendChild(u)}),this.supportedComponentsType.length>0&&(r.value=this.supportedComponentsType[0]);const o=document.createElement("button");o.textContent="Select",o.addEventListener("click",h=>{e(),t(r.value)});const d=document.createElement("button");d.textContent="Cancel",d.addEventListener("click",h=>{e(),t(null)}),n.appendChild(r),n.appendChild(o),n.appendChild(d),i.appendChild(n),document.body.appendChild(i),e=()=>{document.body.contains(i)&&document.body.removeChild(i)}})}}class T extends I{constructor(e,t,i){super(e,p.SSDDrive,t,i)}getCapacity(){return this.capacity}getStorage(){return this.storage}getInfo(){return"Name: "+this.getName()+`
Type: `+this.getType()+`
Capacity: `+this.getCapacity()+`
Actual Storage: `+this.getStorage()}static async addComponent(e){const t=[{key:"name",label:"Component name",type:"string",defaultValue:"New disk"},{key:"capacity",label:"Capacity (GB)",type:"number",defaultValue:500}],n=await new E("Add HDD Disk",t).open();if(!n)return null;const s=parseInt(n.capacity,10);return isNaN(s)||s<=0?(alert("Value have to be positive."),null):new T(n.name,e,s)}}class S extends k{constructor(e,t,i){super(e,p.Mouse,t),this.dpi=i,this.actions.push({name:"RIGHT_CLICK",action:()=>{this.isActive()&&this.simulateClick("RIGHT")}}),this.actions.push({name:"LEFT_CLICK",action:()=>{this.isActive()&&this.simulateClick("LEFT")}})}getDpi(){return this.dpi}getInfo(){return"Name: "+this.getName()+`
Type: `+this.getType()+`
DPI: `+this.getDpi()}static async addComponent(e){const t=[{key:"name",label:"Component name",type:"string",defaultValue:"New mouse"},{key:"dpi",label:"DPI",type:"number",defaultValue:8e3}],n=await new E("Add mouse",t).open();if(!n)return null;const s=parseInt(n.dpi,10);return isNaN(s)||s<=0?(alert("Value have to be positive."),null):new S(n.name,e,s)}simulateClick(e){const t=this.getName();alert(`${t} triggered: ${e} Click!`)}}class D extends k{constructor(e,t){super(e,p.Keyboard,t)}getInfo(){return"Name: "+this.getName()+`
Type: `+this.getType()}static async addComponent(e){const t=[{key:"name",label:"Component name",type:"string",defaultValue:"New keyboard"}],n=await new E("Add keyboard",t).open();return n?new D(n.name,e):null}}class v extends k{constructor(e,t){super(e,p.Monitor,t),this.width=1280,this.height=720,this.actions.push({name:"ON",action:()=>{this.isActive()&&this.setTheme("light")}}),this.actions.push({name:"OFF",action:()=>{this.isActive()&&this.setTheme("dark")}})}getInfo(){return"Name: "+this.getName()+`
Type: `+this.getType()+`
Current resolution: `+this.getResolution()}static async addComponent(e){const t=[{key:"name",label:"Component name",type:"string",defaultValue:"New monitor"}],n=await new E("Add mouse",t).open();return n?new v(n.name,e):null}getResolution(){return`${this.width}x${this.height}`}setHeightResolution(){this.width=1920,this.height=1080,console.log(`Monitor ${this.getName()}: Resolution set to High (${this.getResolution()})`)}setLowResolution(){this.width=1280,this.height=720,console.log(`Monitor ${this.getName()}: Resolution set to Low (${this.getResolution()})`)}setTheme(e){const t=document.body;e==="light"?(t.classList.add("light-theme"),t.classList.remove("dark-theme"),console.log("Theme set to LIGHT.")):(t.classList.add("dark-theme"),t.classList.remove("light-theme"),console.log("Theme set to DARK."))}}function g(a){const e=document.getElementById("app");if(e)e.innerHTML="";else return;const t=document.createElement("div");t.classList.add("components-grid"),a.getComponents().forEach(o=>{const d=document.createElement("div");d.classList.add("component-row");const h=document.createElement("span");h.classList.add("grid-text"),h.textContent=o.getName();const u=document.createElement("span");u.classList.add("grid-text"),u.textContent=o.getType();const c=document.createElement("input");c.classList.add("large-checkbox"),c.type="checkbox",c.name=`inUse ${o.getName()}`,c.checked=o.isActive(),c.disabled=!0;const m=document.createElement("div");m.classList.add("component-actions-container"),o.getActions().forEach(C=>{const b=document.createElement("button");b.classList.add("component-actions"),b.textContent=C.name.replace(/_/g," "),b.addEventListener("click",V=>{C.action()}),m.appendChild(b)});const f=document.createElement("button");f.classList.add("component-actions"),f.textContent="Details",f.addEventListener("click",C=>{alert(o.getInfo())});const l=document.createElement("button");l.classList.add("component-actions"),l.textContent="Remove",l.addEventListener("click",C=>{a.removeComponent(o),g(a)}),d.appendChild(h),d.appendChild(u),d.appendChild(c),d.appendChild(m),d.appendChild(f),d.appendChild(l),t.appendChild(d)});const i=document.createElement("button");i.textContent="Back to Main Menu",i.addEventListener("click",o=>{A(a)});const n=document.createElement("div");n.classList.add("center-element"),n.appendChild(i);const s=document.createElement("button");s.textContent="Add Component",s.addEventListener("click",o=>{new H().open().then(d=>{switch(d){case p.Monitor:{a.addComponent(v.addComponent(a)).then(()=>{g(a)}).catch(()=>{});break}case p.HDDDrive:{a.addComponent(M.addComponent(a)).then(()=>{g(a)}).catch(()=>{});break}case p.SSDDrive:{a.addComponent(T.addComponent(a)).then(()=>{g(a)}).catch(()=>{});break}case p.Mouse:{a.addComponent(S.addComponent(a)).then(()=>{g(a)}).catch(()=>{});break}case p.Keyboard:a.addComponent(D.addComponent(a)).then(()=>{g(a)}).catch(()=>{})}})});const r=document.createElement("div");r.classList.add("right-element"),r.appendChild(s),e.appendChild(n),e.appendChild(t),e.appendChild(r)}var B=(a=>(a[a.GIF=0]="GIF",a[a.MP3=1]="MP3",a[a.EXE=2]="EXE",a))(B||{});function F(a){let e=[];a.getComponents().forEach(i=>{i instanceof I&&i.getFiles().forEach(s=>{s.getType()===B.EXE&&e.push(s)})});const t=e.map(i=>({label:`${i.getName()} (${i.getSize()}KB)`,onClick:()=>{i.run(),L([])}}));t.push({label:"<< Back",onClick:()=>{A(a)}}),L(t),console.log(`System Menu loaded. Found ${e.length} executable files.`)}function $(a){L([{label:"System",onClick:()=>F(a)},{label:"Install new app",onClick:()=>alert("Not implemented yet")}])}function A(a){L([{label:"Hardware",onClick:()=>g(a)},{label:"Software",onClick:()=>$(a)}])}function L(a){let e=document.getElementById("app");e||(console.error("Critical: #app container not found! Re-creating in document.body."),e=document.createElement("div"),e.id="app",document.body.appendChild(e)),e.innerHTML="";const t=document.createElement("div");t.classList.add("buttons-container"),a.forEach(i=>{const n=document.createElement("button");n.textContent=i.label,n.addEventListener("click",i.onClick),t.appendChild(n)}),e.appendChild(t)}class O{constructor(e,t,i,n){this.computer=e,this.name=t,this.type=i,this.size=n}getName(){return this.name}getType(){return this.type}getSize(){return this.size}run(){throw new Error("Each file class have to override this method")}}class P{constructor(e,t){this.isFlipped=!1,this.isMatched=!1,this.icon=e,this.id=t}}const y=class y extends O{constructor(e){super(e,y.NAME,y.TYPE,y.SIZE),this.appContainer=document.body,this.boardElement=null,this.cards=[],this.flippedCards=[],this.matchesFound=0,this.gameSize=16,this.lockBoard=!1}run(){this.appContainer=document.getElementById("app-content")||document.body,this.appContainer.innerHTML="";const e=document.createElement("h2");e.textContent="Gra Memory (Wirtualny Terminal)",this.appContainer.appendChild(e),this.boardElement=document.createElement("div"),this.boardElement.classList.add("memory-board"),this.appContainer.appendChild(this.boardElement),this.initializeGame()}initializeGame(){this.matchesFound=0,this.flippedCards=[],this.lockBoard=!1,this.cards=[];const e=["ðŸš€","ðŸ•","ðŸ’¾","ðŸ’»","ðŸ’¡","â°","â­","ðŸ”¥"],t=[...e,...e];this.cards=t.map((i,n)=>new P(i,n));for(let i=this.cards.length-1;i>0;i--){const n=Math.floor(Math.random()*(i+1));[this.cards[i],this.cards[n]]=[this.cards[n],this.cards[i]]}this.renderBoard()}renderBoard(){this.boardElement&&(this.boardElement.innerHTML="",this.cards.forEach(e=>{const t=this.createCardElement(e);this.boardElement.appendChild(t)}))}createCardElement(e){const t=document.createElement("div");t.classList.add("memory-card"),t.dataset.id=String(e.id);const i=document.createElement("div");i.classList.add("card-face","card-front"),i.textContent="?";const n=document.createElement("div");return n.classList.add("card-face","card-back"),n.textContent=e.icon,t.appendChild(i),t.appendChild(n),e.isFlipped&&t.classList.add("flipped"),e.isMatched&&t.classList.add("matched"),t.addEventListener("click",()=>this.handleCardClick(e)),t}handleCardClick(e){if(this.lockBoard||e.isFlipped||e.isMatched)return;e.isFlipped=!0;const t=this.boardElement.querySelector(`[data-id="${e.id}"]`);t&&t.classList.add("flipped"),this.flippedCards.push(e),this.flippedCards.length===2&&(this.lockBoard=!0,this.checkForMatch())}checkForMatch(){const[e,t]=this.flippedCards;if(e.icon===t.icon){e.isMatched=!0,t.isMatched=!0,this.matchesFound+=2;const i=this.boardElement.querySelector(`[data-id="${e.id}"]`),n=this.boardElement.querySelector(`[data-id="${t.id}"]`);i&&i.classList.add("matched"),n&&n.classList.add("matched"),this.resetBoard(),this.matchesFound===this.gameSize&&setTimeout(()=>this.gameOver(),500)}else setTimeout(()=>{e.isFlipped=!1,t.isFlipped=!1;const i=this.boardElement.querySelector(`[data-id="${e.id}"]`),n=this.boardElement.querySelector(`[data-id="${t.id}"]`);i&&i.classList.remove("flipped"),n&&n.classList.remove("flipped"),this.resetBoard()},1e3)}resetBoard(){this.flippedCards=[],this.lockBoard=!1}gameOver(){alert("Gratulacje! ZnalazÅ‚eÅ› wszystkie pary!"),this.appContainer.innerHTML="",F(this.computer)}};y.NAME="MemoryGame",y.TYPE=B.EXE,y.SIZE=256;let N=y;const w=class w{constructor(){this.components=[],this.currentMonitors=0}async addComponent(e){let t=await e;if(t===null)throw new Error("Fail to add new component");if(t instanceof v)if(this.currentMonitors===w.MAX_MONITORS){alert("Computer already have max amount of monitors");return}else this.currentMonitors+=1;const i=this.components.length+1;t.setId(i),this.components.push(t)}removeComponent(e){e instanceof v&&(this.currentMonitors-=1),this.components=this.components.filter(t=>t.getId()!==e.getId())}getComponents(){return this.components}};w.MAX_MONITORS=3;let x=w;async function R(){const a=new x,e=new v("",a).activate(!0),t=new M("Seagate Barracuda",a,500).activate(!0),i=new S("LogiTech",a,8e3).activate(!0),n=new D("LogiTech",a).activate(!0),s=new N(a);return t.addFile(s),await a.addComponent(Promise.resolve(e)),await a.addComponent(Promise.resolve(t)),await a.addComponent(Promise.resolve(i)),await a.addComponent(Promise.resolve(n)),a}document.addEventListener("DOMContentLoaded",async a=>{const e=await R();A(e)});
